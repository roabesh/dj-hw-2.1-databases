# Django ORM - –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø–æ —Ä–∞–±–æ—Ç–µ —Å Django ORM, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –¥–≤–∞ –∑–∞–¥–∞–Ω–∏—è.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ó–∞–¥–∞–Ω–∏–µ 1: –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ (—Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤)](#–∑–∞–¥–∞–Ω–∏–µ-1-–∫–∞—Ç–∞–ª–æ–≥-—Ç–æ–≤–∞—Ä–æ–≤)
- [–ó–∞–¥–∞–Ω–∏–µ 2: –û–Ω–ª–∞–π–Ω-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞](#–∑–∞–¥–∞–Ω–∏–µ-2-–æ–Ω–ª–∞–π–Ω-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞)

---

## –ó–∞–¥–∞–Ω–∏–µ 1: –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤

**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `work_with_database/`

### –û–ø–∏—Å–∞–Ω–∏–µ

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ —Å –∏–º–ø–æ—Ä—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV —Ñ–∞–π–ª–∞.

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV —Ñ–∞–π–ª–∞ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ —Ü–µ–Ω–µ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è slug –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd work_with_database

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source ../.venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
pip install -r requirements.txt

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py migrate

# –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ CSV
python manage.py import_phones

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
python manage.py runserver
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ URL

- `http://127.0.0.1:8000/catalog/` - –∫–∞—Ç–∞–ª–æ–≥ –≤—Å–µ—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
- `http://127.0.0.1:8000/catalog/?sort=name` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- `http://127.0.0.1:8000/catalog/?sort=min_price` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é —Ü–µ–Ω—ã
- `http://127.0.0.1:8000/catalog/?sort=max_price` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é —Ü–µ–Ω—ã
- `http://127.0.0.1:8000/catalog/<slug>/` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–ª–µ—Ñ–æ–Ω–µ

### –ú–æ–¥–µ–ª—å Phone

```python
class Phone(models.Model):
    id = models.IntegerField(primary_key=True)
    name = models.CharField(max_length=255)
    price = models.DecimalField(max_digits=10, decimal_places=2)
    image = models.URLField()
    release_date = models.DateField()
    lte_exists = models.BooleanField()
    slug = models.SlugField(max_length=255, unique=True)
```

---

## –ó–∞–¥–∞–Ω–∏–µ 2: –û–Ω–ª–∞–π–Ω-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞

**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `models_list_displaying/`

### –û–ø–∏—Å–∞–Ω–∏–µ

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º –∫–Ω–∏–≥ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –ø–æ –¥–∞—Ç–∞–º –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–Ω–∏–≥ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–Ω–∏–≥ –ø–æ –¥–∞—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –¥–∞—Ç–∞–º–∏ (–ø—Ä–µ–¥—ã–¥—É—â–∞—è/—Å–ª–µ–¥—É—é—â–∞—è)
- ‚úÖ –ö–∞—Å—Ç–æ–º–Ω—ã–π URL –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–ª—è –¥–∞—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd models_list_displaying

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source ../.venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
pip install -r requirements.txt

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py migrate

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
python manage.py loaddata fixtures/books.json

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
python manage.py runserver 8001
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ URL

- `http://127.0.0.1:8001/books/` - –≤—Å–µ –∫–Ω–∏–≥–∏
- `http://127.0.0.1:8001/books/2021-05-05/` - –∫–Ω–∏–≥–∏ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É

### –ú–æ–¥–µ–ª—å Book

```python
class Book(models.Model):
    name = models.CharField('–ù–∞–∑–≤–∞–Ω–∏–µ', max_length=64)
    author = models.CharField('–ê–≤—Ç–æ—Ä', max_length=64)
    pub_date = models.DateField('–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏')
```

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Django 6.0**
- **Python 3.13**
- **SQLite3** (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
- **Bootstrap 5** (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥)

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
2.1-databases/
‚îú‚îÄ‚îÄ work_with_database/       # –ó–∞–¥–∞–Ω–∏–µ 1
‚îÇ   ‚îú‚îÄ‚îÄ phones/               # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –º–æ–¥–µ–ª—å—é Phone
‚îÇ   ‚îú‚îÄ‚îÄ templates/            # –®–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ static/               # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ phones.csv            # CSV —Å –¥–∞–Ω–Ω—ã–º–∏
‚îÇ
‚îú‚îÄ‚îÄ models_list_displaying/   # –ó–∞–¥–∞–Ω–∏–µ 2
‚îÇ   ‚îú‚îÄ‚îÄ books/                # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –º–æ–¥–µ–ª—å—é Book
‚îÇ   ‚îú‚îÄ‚îÄ templates/            # –®–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ static/               # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ fixtures/             # –§–∏–∫—Å—Ç—É—Ä—ã —Å –¥–∞–Ω–Ω—ã–º–∏
‚îÇ
‚îî‚îÄ‚îÄ .venv/                    # –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Best Practices Django ORM

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `get_object_or_404`** - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
2. **`update_or_create`** - –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
3. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ã URL** - —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ URL
4. **Ordering –≤ Meta** - –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥–µ–ª–∏
5. **Slugify** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è URL-friendly –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

- –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `.order_by()` –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å `.filter()`

---

## üìù –ê–≤—Ç–æ—Ä

–ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–∞ –ø–æ Django ORM

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç

